/*! jQuery Simpletag - v0.1.0 - 2015-02-17
* https://github.com/derapU/jquery-simpletag
* Copyright (c) 2015 Andreas Berghaus; Licensed MIT */

!function(a){"use strict";var b;a.fn.simpletag=function(c){return this.each(function(){this.simpletag=new b(a(this),c)})},b=function(a,b){this.init(a,b)},b.prototype={default_opts:{min_length:3,delimiter:",",border_spacing:null,input_min_width:30},opts:null,tags:[],$original_input:null,$input:null,$container:null,$list:null,init:function(b,c){this.opts=a.extend({},this.default_opts,c),this.$original_input=b,this.create_container(),this.create_list(),this.create_input(),this.$original_input.before(this.$container),this.$container.append(this.$original_input).append(this.$list),this.$list.append(this.$input),this.bind_events(),this.tags=this.read_tags(),this.update_view()},create_container:function(){this.$container=a('<div class="simpletag-container">'),this.$container.clonecss(this.$original_input,["background-color","color","border-style","border-color","border-width","float","font-family","font-size","font-style","font-weight","text-transform","text-decoration","width"]).css({minHeight:this.$original_input.outerHeight(),lineHeight:"1em"})},create_input:function(){this.$input=a('<input type="text" class="simpletag-input">').css({width:this.opts.input_min_width,marginTop:this.opts.border_spacing}).val("")},create_list:function(){null===this.opts.border_spacing&&(this.opts.border_spacing=parseInt(this.$original_input.css("padding-top"),10)),this.$list=a('<div class="simpletag-list">').clonecss(this.$original_input,["padding-right","padding-left"]),this.$list.css("padding-bottom",this.opts.border_spacing+"px")},update_view:function(){var b=this,c=a('<span class="simpletag-tag">');c.css({marginTop:this.opts.border_spacing+"px"}),this.$list.find(".simpletag-tag").remove(),a.each(this.tags,function(){b.$input.before(c.clone().html(this))})},add_tag:function(a){return a=this.trim(a),""===a?!1:this.opts.min_length>a.length?!1:(!0===this.tag_exists(a)&&this.remove_tag(a),this.tags.push(a),this.write_tags(),void this.update_view())},remove_tag:function(b){var c=a.inArray(b,this.tags);c>-1&&(this.tags.splice(c,1),this.write_tags()),this.update_view()},tag_exists:function(b){return!0==-1<a.inArray(b,this.tags)},read_tags:function(){var b=this;return a.map(this.$original_input.val().split(this.opts.delimiter),function(a){return b.trim(a)})},write_tags:function(){this.$original_input.val(this.tags.join(this.opts.delimiter))},$mirror:null,resize_input:function(){var b=this,c=this.$mirror;null===c&&(c=a("<span>"),c.css({display:"block",position:"absolute",top:"-100000px",left:"-100000px",padding:0,margin:0,width:"auto"}),c.clonecss(b.$input,["font-family","font-size","font-style","font-weight","letter-spacing","line-height","text-transform","text-indent","whitespace","word-spacing"]),a("body").prepend(c),this.$mirror=c),c.html(b.$input.val()),b.$input.width(parseInt(c.innerWidth(),10)+b.opts.input_min_width+"px")},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},bind_events:function(){var b=this;this.$list.on("click","> .simpletag-tag",function(c){c.preventDefault(),b.remove_tag(a(this).html())}),this.$input.on("keyup",function(a){(13===a.keyCode||b.opts.delimiter===b.$input.val().substr(-1))&&(a.preventDefault(),!1!==b.add_tag(b.$input.val().replace(/,$/i,"",b.$input.val()))&&b.$input.val("")),b.resize_input()}).on("keydown",function(a){8===a.keyCode&&0===b.$input.val().length&&(a.preventDefault(),b.remove_tag(b.tags[b.tags.length-1]))}),this.$container.on("click",function(a){a.preventDefault(),b.$input.trigger("focus")})}},a.fn.clonecss=function(b,c){return a.each(this,function(){var d=a(this);return a.each(c,function(){return d.css(this,b.css(this))})})}}(jQuery);
//# sourceMappingURL=jquery-simpletag.min.js.map