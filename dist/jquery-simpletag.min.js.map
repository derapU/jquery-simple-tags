{"version":3,"file":"jquery-simpletag.min.js","sources":["../src/js/jquery.simpletag.js"],"names":["$","SimpleTag","fn","simpletag","opts","this","each","$input","init","prototype","default_opts","min_length","delimiter","border_spacing","input_min_width","tags","$original_input","$container","$list","extend","create_container","create_list","create_input","before","append","bind_events","read_tags","update_view","clonecss","css","minHeight","outerHeight","lineHeight","width","maxHeight","marginTop","val","parseInt","self","$tag","find","remove","clone","html","add_tag","tag","trim","length","tag_exists","remove_tag","push","write_tags","index","inArray","splice","map","split","join","$mirror","resize_input","display","position","top","left","padding","margin","prepend","innerWidth","replace","on","e","preventDefault","keyCode","substr","trigger","$src","props","$dest","jQuery"],"mappings":"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","sourcesContent":["/*\n * jquery-simpletag\n * https://github.com/derapU/jquery-simpletag\n *\n * Copyright (c) 2015 Andreas Berghaus\n * Licensed under the MIT license.\n */\n\n( function( $ ) {\n\t\"use strict\";\n\n\tvar SimpleTag,\n\t\tdefault_opts;\n\n\t$.fn.simpletag = function ( opts ) {\n\t\treturn this.each( function () {\n\t\t\tthis.simpletag = new SimpleTag( $( this ), opts );\n\t\t} );\n\t};\n\n\tSimpleTag = function ( $input, opts ) {\n\t\tthis.init( $input, opts );\n\t};\n\tSimpleTag.prototype = {\n\t\tdefault_opts: {\n\t\t\tmin_length: 3,\n\t\t\tdelimiter: ',',\n\t\t\tborder_spacing:  null, // null | px\n\t\t\tinput_min_width: 30    // in px\n\t\t},\n\t\topts: null,\n\n\t\ttags: [],\n\n\t\t$original_input: null,\n\t\t$input:          null,\n\t\t$container:      null,\n\t\t$list:           null,\n\n\t\tinit: function ( $input, opts ) {\n\t\t\t// configure and save the original field\n\t\t\tthis.opts            = $.extend( {}, this.default_opts, opts );\n\t\t\tthis.$original_input = $input;\n\n\t\t\t// create elements\n\t\t\tthis.create_container();\n\t\t\tthis.create_list();\n\n\t\t\t// clone original-input and append it to the list\n\t\t\tthis.create_input();\n\n\t\t\t// insert container and put original input inside\n\t\t\t// then append our taglist\n\t\t\tthis.$original_input.before( this.$container );\n\t\t\tthis.$container\n\t\t\t\t.append( this.$original_input )\n\t\t\t\t.append( this.$list );\n\n\n\t\t\t// append the input field\n\t\t\tthis.$list.append( this.$input );\n\n\t\t\t// bind events\n\t\t\tthis.bind_events();\n\n\t\t\t// update taglist with values from original input\n\t\t\tthis.tags = this.read_tags();\n\t\t\tthis.update_view();\n\t\t},\n\n\t\tcreate_container: function () {\n\t\t\tthis.$container = $( '<div class=\"simpletag-container\">' );\n\n\t\t\t// clone some css-properties\n\t\t\tthis.$container.clonecss( this.$original_input, [\n\t\t\t\t'background-color',\n\t\t\t\t'color',\n\t\t\t\t'border-style',\n\t\t\t\t'border-color',\n\t\t\t\t'border-width',\n\t\t\t\t'float',\n\t\t\t\t'font-family',\n\t\t\t\t'font-size',\n\t\t\t\t'font-style',\n\t\t\t\t'font-weight',\n\t\t\t\t'margin-bottom',\n\t\t\t\t'margin-top',\n\t\t\t\t'margin-left',\n\t\t\t\t'margin-right',\n\t\t\t\t'text-transform',\n\t\t\t\t'text-decoration',\n\t\t\t\t'width'\n\t\t\t] ).css ( {\n\t\t\t\tminHeight:  this.$original_input.outerHeight(),\n\t\t\t\tlineHeight: '1em'\n\t\t\t} );\n\t\t},\n\t\tcreate_input: function () {\n\t\t\tthis.$input = $( '<input type=\"text\" class=\"simpletag-tag simpletag-input\">' )\n\t\t\t\t.css( {\n\t\t\t\t\twidth: this.opts.input_min_width,\n\t\t\t\t\tmaxHeight: this.$original_input.css( 'font-size' ),\n\t\t\t\t\tmarginTop: this.opts.border_spacing\n\t\t\t\t} )\n\t\t\t\t.clonecss( this.$original_input, [\n\t\t\t\t\t'background-color',\n\t\t\t\t\t'color'\n\t\t\t\t] )\n\t\t\t\t.val( '' );\n\t\t},\n\t\tcreate_list: function () {\n\t\t\tif ( null === this.opts.border_spacing ) {\n\t\t\t\tthis.opts.border_spacing = parseInt( this.$original_input.css( 'padding-top' ), 10 );\n\t\t\t}\n\t\t\tthis.$list = $( '<div class=\"simpletag-list\">' ).clonecss( this.$original_input, [\n\t\t\t\t'padding-right',\n\t\t\t\t'padding-left'\n\t\t\t] );\n\t\t\tthis.$list.css( 'padding-bottom', this.opts.border_spacing + 'px' )\n\t\t},\n\n\t\tupdate_view: function ( field_value ) {\n\t\t\tvar self = this,\n\t\t\t\t$tag = $( '<span class=\"simpletag-tag\">' );\n\n\t\t\t// add correct border-spacing\n\t\t\t$tag.css( {\n\t\t\t\tmarginTop: this.opts.border_spacing + 'px',\n\t\t\t} );\n\n\t\t\t// remove tags\n\t\t\tthis.$list.find( ':not(input).simpletag-tag' ).remove();\n\n\t\t\t// insert tags in list\n\t\t\t$.each( this.tags, function () {\n\t\t\t\tself.$input.before( $tag.clone().html( this ) );\n\t\t\t} );\n\t\t},\n\n\n\t\t// add or remove tag to / from tag-box\n\t\tadd_tag: function ( tag ) {\n\t\t\ttag = this.trim( tag );\n\n\t\t\t// drop empty tag\n\t\t\tif ( '' === tag ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// drop short tags\n\t\t\tif ( this.opts.min_length > tag.length ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// remove duplicate-tag and append it to the end\n\t\t\tif ( true === this.tag_exists( tag ) ) {\n\t\t\t\tthis.remove_tag( tag );\n\t\t\t}\n\n\t\t\t// add to original input\n\t\t\tthis.tags.push( tag );\n\t\t\tthis.write_tags();\n\n\t\t\t// add to view\n\t\t\tthis.update_view();\n\t\t},\n\t\tremove_tag: function ( tag ) {\n\t\t\tvar index = $.inArray( tag, this.tags );\n\n\t\t\t// remove original input\n\t\t\tif ( -1 < index ) {\n\t\t\t\tthis.tags.splice( index, 1 );\n\t\t\t\tthis.write_tags();\n\t\t\t}\n\n\t\t\t// update view\n\t\t\tthis.update_view();\n\t\t},\n\t\ttag_exists: function ( tag ) {\n\t\t\treturn true === -1 < $.inArray( tag, this.tags );\n\t\t},\n\n\n\t\t// read and write tags from / to original input-field\n\t\tread_tags: function () {\n\t\t\tvar self = this;\n\t\t\treturn $.map( this.$original_input.val().split( this.opts.delimiter ), function ( tag ) {\n\t\t\t\treturn self.trim( tag );\n\t\t\t} );\n\t\t},\n\t\twrite_tags: function () {\n\t\t\tthis.$original_input.val( this.tags.join( this.opts.delimiter ) );\n\t\t},\n\n\n\t\t// resize the input-field to match the contents length\n\t\t$mirror: null,\n\t\tresize_input: function () {\n\t\t\tvar self    = this,\n\t\t\t\t$mirror = this.$mirror;\n\n\t\t\tif ( null === $mirror ) {\n\t\t\t\t$mirror = $( '<span>' );\n\t\t\t\t$mirror.css( {\n\t\t\t\t\tdisplay:  'block',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop:      '-100000px',\n\t\t\t\t\tleft:     '-100000px',\n\t\t\t\t\tpadding:  0,\n\t\t\t\t\tmargin:   0,\n\t\t\t\t\twidth:    'auto'\n\t\t\t\t} );\n\n\t\t\t\t// clone font-properties from inputfield\n\t\t\t\t$mirror.clonecss( self.$input, [\n\t\t\t\t\t'font-family',\n\t\t\t\t\t'font-size',\n\t\t\t\t\t'font-style',\n\t\t\t\t\t'font-weight',\n\t\t\t\t\t'letter-spacing',\n\t\t\t\t\t'line-height',\n\t\t\t\t\t'text-transform',\n\t\t\t\t\t'text-indent',\n\t\t\t\t\t'whitespace',\n\t\t\t\t\t'word-spacing'\n\t\t\t\t] );\n\n\t\t\t\t// save the mirror\n\t\t\t\t$( 'body' ).prepend( $mirror );\n\t\t\t\tthis.$mirror = $mirror;\n\t\t\t}\n\n\t\t\t// set current input-value, get the rendered width and apply\n\t\t\t// it to the input including the configured min-width to save some\n\t\t\t// place for the next character.\n\t\t\t$mirror.html( self.$input.val() );\n\t\t\tself.$input.width( parseInt( $mirror.innerWidth(), 10 )+self.opts.input_min_width + 'px' );\n\t\t},\n\n\n\t\ttrim: function ( val ) {\n\t\t\treturn val.replace( /^\\s*|\\s*$/g, '' );\n\t\t},\n\n\t\tbind_events: function () {\n\t\t\tvar self = this;\n\n\t\t\t// remove tag on click\n\t\t\tthis.$list.on( 'click', '> .simpletag-tag', function ( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tself.remove_tag( $( this ).html() );\n\t\t\t} );\n\n\t\t\t// autoresize inputfield and check if we have to add a tag\n\t\t\tthis.$input.on( 'keyup', function ( e ) {\n\t\t\t\t// add tag\n\t\t\t\tif ( 13 === e.keyCode || self.opts.delimiter === self.$input.val().substr( -1 ) ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif ( false !== self.add_tag( self.$input.val().replace( /,$/i, '', self.$input.val() ) ) ) {\n\t\t\t\t\t\tself.$input.val( '' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tself.resize_input();\n\t\t\t} ).on( 'keydown', function ( e ) {\n\t\t\t\t// remove tag\n\t\t\t\tif ( 8 === e.keyCode && 0 === self.$input.val().length ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tself.remove_tag( self.tags[self.tags.length-1] );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// focus input on container-click\n\t\t\tthis.$container.on( 'click', function ( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tself.$input.trigger( 'focus' );\n\t\t\t} );\n\t\t}\n\t};\n\n\t// little helper to clone css-properties\n\t$.fn.clonecss = function ( $src, props ) {\n\t\treturn $.each( this, function () {\n\t\t\tvar $dest = $( this );\n\t\t\treturn $.each( props, function () {\n\t\t\t\treturn $dest.css( this, $src.css( this ) );\n\t\t\t} );\n\t\t} );\n\t};\n} ( jQuery ) );\n"]}