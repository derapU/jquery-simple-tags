{"version":3,"file":"jquery-simple-tags.min.js","sources":["../src/js/jquery.simple-tags.js"],"names":["$","SimpleTags","fn","simple_tags","opts","this","each","undefined","_revert","$input","_init","prototype","_default_opts","min_length","delimiter","border_spacing","input_min_width","events","change","tags","typeahead","_opts","_tags","_$original_input","_$input","_$container","_$list","self","extend","_createContainer","_createList","_createInput","before","append","complete","select","value","_addTag","val","_bindEvents","_readTags","updateView","clone","attr","after","css","position","zIndex","width","clonecss","marginBottom","minHeight","outerHeight","lineHeight","parseInt","$tag","marginTop","find","remove","html","tag","_trim","length","_tag_exists","_remove_tag","push","_writeTags","index","inArray","splice","map","split","join","apply","replace","replaceWith","get","on","e","preventDefault","keyCode","substr","trigger","$src","props","$dest","jQuery"],"mappings":"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","sourcesContent":["/*\n * jquery-simple-tags\n * https://github.com/derapU/jquery-simple-tags\n *\n * Copyright (c) 2015 Andreas Berghaus\n * Licensed under the MIT license.\n */\n\n( function ( $ ) {\n\t\"use strict\";\n\n\tvar SimpleTags;\n\n\t$.fn.simple_tags = function ( opts ) {\n\t\treturn this.each( function () {\n\t\t\tif ( undefined !== this.simple_tags ) {\n\t\t\t\tthis.simple_tags._revert();\n\t\t\t}\n\t\t\tif ( undefined === this.simple_tags ) {\n\t\t\t\treturn this.simple_tags = new SimpleTags( $( this ), opts );\n\t\t\t}\n\t\t} );\n\t};\n\n\tSimpleTags = function ( $input, opts ) {\n\t\tthis._init( $input, opts );\n\t\treturn this;\n\t};\n\tSimpleTags.prototype = {\n\t\t_default_opts: {\n\t\t\tmin_length: 3,\n\t\t\tdelimiter: ',',\n\t\t\tborder_spacing:  null, // null | px\n\t\t\tinput_min_width: 30,   // in px\n\t\t\tevents: {\n\t\t\t\tchange: function ( tags ) { return tags; }\n\t\t\t},\n\t\t\ttypeahead: null        // example: function ( value ) { return ''; }\n\t\t},\n\t\t_opts: null,\n\n\t\t_tags: [],\n\n\t\t_$original_input: null,\n\t\t_$input:          null,\n\t\t_$container:      null,\n\t\t_$list:           null,\n\n\t\t_init: function ( $input, opts ) {\n\t\t\tvar self = this;\n\n\t\t\t// configure and save the original field\n\t\t\tthis._opts            = $.extend( true, {}, this._default_opts, opts );\n\t\t\tthis._$original_input = $input;\n\n\t\t\t// create elements\n\t\t\tthis._createContainer();\n\t\t\tthis._createList();\n\t\t\tthis._createInput();\n\n\t\t\t// insert container\n\t\t\tthis._$input.before( this._$container );\n\t\t\tthis._$container.append( this._$list );\n\n\t\t\t// check typeahead\n\t\t\tif ( null !== this._opts.typeahead ) {\n\t\t\t\tthis._$input.typeahead( {\n\t\t\t\t\tcomplete: this._opts.typeahead,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tselect: function ( value ) {\n\t\t\t\t\t\t\tself._addTag( value );\n\t\t\t\t\t\t\tself._$input.val( '' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// bind events\n\t\t\tthis._bindEvents();\n\n\t\t\t// update taglist with values from original input\n\t\t\tthis._tags = this._readTags();\n\t\t\tthis.updateView();\n\t\t},\n\n\t\t_createInput: function () {\n\t\t\t// create new input-field\n\t\t\tthis._$input = this._$original_input.clone().attr( 'id', '' ).attr( 'name', '' );\n\n\t\t\t// append new input-field\n\t\t\tthis._$original_input.after( this._$input.val( '' ) );\n\n\t\t\t// hide original-input\n\t\t\tthis._$original_input.css( {\n\t\t\t\tposition: 'absolute',\n\t\t\t\tzIndex: -1,\n\t\t\t\twidth: 0\n\t\t\t} );\n\t\t},\n\n\t\t_createContainer: function () {\n\t\t\tthis._$container = $( '<div class=\"simple-tags-container\">' );\n\n\t\t\t// clone some css-properties\n\t\t\tthis._$container.clonecss( this._$original_input, [\n\t\t\t\t'font-family',\n\t\t\t\t'font-size',\n\t\t\t\t'font-style',\n\t\t\t\t'font-weight',\n\t\t\t\t'margin-top',\n\t\t\t\t'margin-left',\n\t\t\t\t'margin-right',\n\t\t\t\t'text-transform',\n\t\t\t\t'text-decoration',\n\t\t\t\t'width'\n\t\t\t] ).css ( {\n\t\t\t\tmarginBottom: this._opts.border_spacing,\n\t\t\t\tminHeight:  this._$original_input.outerHeight(),\n\t\t\t\tlineHeight: '1em'\n\t\t\t} );\n\t\t},\n\t\t_createList: function () {\n\t\t\tif ( null === this._opts.border_spacing ) {\n\t\t\t\tthis._opts.border_spacing = parseInt( this._$original_input.css( 'padding-top' ), 10 );\n\t\t\t}\n\t\t\tthis._$list = $( '<div class=\"simple-tags-list\">' );\n\t\t\tthis._$list.css( 'padding-bottom', 0.5*this._opts.border_spacing + 'px' );\n\t\t},\n\n\t\tupdateView: function () {\n\t\t\tvar self = this,\n\t\t\t\t$tag = $( '<span class=\"simple-tags-tag\">' );\n\n\t\t\tthis._tags = this._readTags();\n\n\t\t\t// add correct border-spacing\n\t\t\t$tag.css( {\n\t\t\t\tmarginTop: this._opts.border_spacing + 'px',\n\t\t\t} );\n\n\t\t\t// remove tags\n\t\t\tthis._$list.find( ':not(input).simple-tags-tag' ).remove();\n\n\t\t\t// insert tags in list\n\t\t\t$.each( this._tags, function () {\n\t\t\t\tself._$list.append( $tag.clone().html( this ) );\n\t\t\t} );\n\t\t},\n\n\n\t\t// add or remove tag to / from tag-box\n\t\t_addTag: function ( tag ) {\n\t\t\ttag = this._trim( tag );\n\n\t\t\t// drop empty tag\n\t\t\tif ( '' === tag ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// drop short tags\n\t\t\tif ( this._opts.min_length > tag.length ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// remove duplicate-tag and append it to the end\n\t\t\tif ( true === this._tag_exists( tag ) ) {\n\t\t\t\tthis._remove_tag( tag );\n\t\t\t}\n\n\t\t\t// add to original input\n\t\t\tthis._tags.push( tag );\n\t\t\tthis._writeTags();\n\n\t\t\t// add to view\n\t\t\tthis.updateView();\n\t\t},\n\t\t_remove_tag: function ( tag ) {\n\t\t\tvar index = $.inArray( tag, this._tags );\n\n\t\t\t// remove original input\n\t\t\tif ( -1 < index ) {\n\t\t\t\tthis._tags.splice( index, 1 );\n\t\t\t\tthis._writeTags();\n\t\t\t}\n\n\t\t\t// update view\n\t\t\tthis.updateView();\n\t\t},\n\t\t_tag_exists: function ( tag ) {\n\t\t\treturn true === -1 < $.inArray( tag, this._tags );\n\t\t},\n\n\n\t\t// read and write tags from / to original input-field\n\t\t_readTags: function () {\n\t\t\tvar self = this;\n\t\t\treturn $.map( this._$original_input.val().split( this._opts.delimiter ), function ( tag ) {\n\t\t\t\treturn self._trim( tag ) || null;\n\t\t\t} );\n\t\t},\n\t\t_writeTags: function () {\n\t\t\tthis._$original_input.val( this._tags.join( this._opts.delimiter ) );\n\t\t\tthis._opts.events.change.apply( this, [this._tags] );\n\t\t},\n\n\t\t_trim: function ( val ) {\n\t\t\treturn val.replace( /^\\s*|\\s*$/g, '' );\n\t\t},\n\t\t_revert: function () {\n\t\t\tthis._$container.replaceWith( this._$original_input );\n\t\t\tthis._$original_input.get( 0 ).simple_tags = undefined;\n\n\t\t\tthis._$input.remove();\n\n\t\t\t// remove styles from original-input\n\t\t\tthis._$original_input.css( {\n\t\t\t\tposition: '',\n\t\t\t\tzIndex: '',\n\t\t\t\twidth: ''\n\t\t\t} );\n\t\t},\n\n\t\t_bindEvents: function () {\n\t\t\tvar self = this;\n\n\t\t\t// remove tag on click\n\t\t\tthis._$list.on( 'click', '> .simple-tags-tag', function ( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tself._remove_tag( $( this ).html() );\n\t\t\t} );\n\n\t\t\t// autoresize inputfield and check if we have to add a tag\n\t\t\tthis._$input.on( 'keyup', function ( e ) {\n\t\t\t\t// add tag\n\t\t\t\tif ( 13 === e.keyCode || self._opts.delimiter === self._$input.val().substr( -1 ) ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif ( false !== self._addTag( self._$input.val().replace( /,$/i, '', self._$input.val() ) ) ) {\n\t\t\t\t\t\tself._$input.val( '' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// focus input on container-click\n\t\t\tthis._$container.on( 'click', function ( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tself._$input.trigger( 'focus' );\n\t\t\t} );\n\t\t}\n\t};\n\n\t// little helper to clone css-properties\n\t$.fn.clonecss = function ( $src, props ) {\n\t\treturn $.each( this, function () {\n\t\t\tvar $dest = $( this );\n\t\t\treturn $.each( props, function () {\n\t\t\t\treturn $dest.css( this, $src.css( this ) );\n\t\t\t} );\n\t\t} );\n\t};\n} ( jQuery ) );\n"]}